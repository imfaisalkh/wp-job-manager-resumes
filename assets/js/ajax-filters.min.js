jQuery(document).ready(function(e){var a=[];e(".resumes").on("update_results",function(s,r,t){var i="",n=e(this),o=n.find(".resume_filters"),d=n.find(".showing_resumes"),l=n.find(".resumes"),u=n.data("per_page"),c=n.data("orderby"),_=n.data("order"),g=n.data("featured"),h=e("div.resumes").index(this);if(a[h]&&a[h].abort(),t?e(".load_more_resumes",n).addClass("loading"):(e(l).addClass("loading"),e("li.resume, li.no_resumes_found",l).css("visibility","hidden")),1==n.data("show_filters")){var p=o.find(':input[name^="search_categories"]').map(function(){return e(this).val()}).get(),m="",f="",v=o.find(':input[name="search_keywords"]'),w=o.find(':input[name="search_location"]');v.val()!=v.attr("placeholder")&&(m=v.val()),w.val()!=w.attr("placeholder")&&(f=w.val());i={action:"resume_manager_get_resumes",search_keywords:m,search_location:f,search_categories:p,per_page:u,orderby:c,order:_,page:r,featured:g,show_pagination:n.data("show_pagination"),form_data:o.serialize()}}else i={action:"resume_manager_get_resumes",search_categories:n.data("categories").split(","),search_keywords:n.data("keywords"),search_location:n.data("location"),per_page:u,orderby:c,order:_,featured:g,page:r,show_pagination:n.data("show_pagination")};a[h]=e.ajax({type:"POST",url:resume_manager_ajax_filters.ajax_url,data:i,success:function(a){if(a)try{a.indexOf("\x3c!--WPJM--\x3e")>=0&&(a=a.split("\x3c!--WPJM--\x3e")[1]),a.indexOf("\x3c!--WPJM_END--\x3e")>=0&&(a=a.split("\x3c!--WPJM_END--\x3e")[0]);var s=e.parseJSON(a);s.showing?e(d).show().html("").append("<span>"+s.showing+"</span>"+s.showing_links):e(d).hide(),s.html&&(t?e(l).append(s.html):e(l).html(s.html)),1==n.data("show_pagination")?(n.find(".job-manager-pagination").remove(),s.pagination&&n.append(s.pagination)):(s.found_resumes&&s.max_num_pages!==r?e(".load_more_resumes",n).show().data("page",r):e(".load_more_resumes",n).hide(),e(".load_more_resumes",n).removeClass("loading"),e("li.resume",l).css("visibility","visible")),e(l).removeClass("loading"),n.triggerHandler("updated_results",s)}catch(e){}}})}),e("#search_keywords, #search_location, #search_categories").change(function(){e(this).closest("div.resumes").triggerHandler("update_results",[1,!1])}).change(),e(".resume_filters").on("click",".reset",function(){var a=e(this).closest("div.resumes"),s=e(this).closest("form");return s.find(':input[name="search_keywords"]').not(':input[type="hidden"]').val(""),s.find(':input[name="search_location"]').not(':input[type="hidden"]').val(""),s.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val(0).trigger("chosen:updated"),a.triggerHandler("reset"),a.triggerHandler("update_results",[1,!1]),!1}),e(".load_more_resumes").click(function(){var a=e(this).closest("div.resumes"),s=e(this).data("page");return s=s?parseInt(s):1,e(this).data("page",s+1),a.triggerHandler("update_results",[s+1,!0]),!1}),e("div.resumes").on("click",".job-manager-pagination a",function(){var a=e(this).closest("div.resumes"),s=e(this).data("page");return a.triggerHandler("update_results",[s,!1]),!1}),e.isFunction(e.fn.chosen)&&e('select[name^="search_categories"]').chosen()});